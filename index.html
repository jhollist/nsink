<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="N-Sink is an analysis that utilizes geospatial data to estimate a 
             flow path and the nitrogen removal along that flow path.  
             Additionally, several static maps summarizing nitrogen removal may 
             be summarized.  The nsink package provides tools to setup and run 
             this analysis for any HUC in the United States.">
<title>Flow path nitrogen removal estimation • nsink</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Flow path nitrogen removal estimation">
<meta property="og:description" content="N-Sink is an analysis that utilizes geospatial data to estimate a 
             flow path and the nitrogen removal along that flow path.  
             Additionally, several static maps summarizing nitrogen removal may 
             be summarized.  The nsink package provides tools to setup and run 
             this analysis for any HUC in the United States.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">nsink</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/intro.html">Introduction to `nsink`</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/nsink/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="nsink">nsink<a class="anchor" aria-label="anchor" href="#nsink"></a>
</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

</div>
<div class="section level1">
<h1 id="statement-of-need">Statement of need<a class="anchor" aria-label="anchor" href="#statement-of-need"></a>
</h1>
<p>The <code>nsink</code> package is an R implementation of the methods described in <a href="https://doi.org/10.1016/j.ecoleng.2010.02.006" class="external-link">Kellogg et. al (2010)</a>. Previous implementation of this approach relied on a manual, vector based approach that was time consuming to prepare. This approach uses a hybrid raster-vector approach that takes relatively little time to set up for each new watershed and relies on readily available data. Total run times vary, but range from minutes up to 5 hours depending on options selected. Previous versions took weeks of manual data manipulation. Thus, <code>nsink</code> was developed to satisfy the need for quicker implementation of the NSink method as described in <a href="https://doi.org/10.1016/j.ecoleng.2010.02.006" class="external-link">Kellogg et. al (2010)</a>.</p>
</div>
<div class="section level1">
<h1 id="nsink-functionality">
<code>nsink</code> functionality<a class="anchor" aria-label="anchor" href="#nsink-functionality"></a>
</h1>
<p>As of 2022-03-14 user functions for the <code>nsink</code> package are:</p>
<ul>
<li>
<code><a href="reference/nsink_get_huc_id.html">nsink_get_huc_id()</a></code>: A function for searching the name of a USGS Watershed Boundary Dataset Hydrologic Unit (<a href="https://www.usgs.gov/core-science-systems/ngp/national-hydrography/watershed-boundary-dataset" class="external-link uri">https://www.usgs.gov/core-science-systems/ngp/national-hydrography/watershed-boundary-dataset</a>) and retrieving its 12-digit Hydrologic Unit Code (HUC).<br>
</li>
<li>
<code><a href="reference/nsink_get_data.html">nsink_get_data()</a></code>: Using any acceptable HUC ID (e.g. 2-digit to 12-digit), this function downloads the NHDPlus, SSURGO, NLCD Land Cover, and the NLCD Impervious for that HUC.<br>
</li>
<li>
<code><a href="reference/nsink_prep_data.html">nsink_prep_data()</a></code>: <code>nsink</code> needs data in a common coordinate reference system, from mutliple NHDPlus tables, and from different portions of SSURGO. This function completes these data preparation steps and outputs all data, clipped to the HUC boundary.</li>
<li>
<code><a href="reference/nsink_calc_removal.html">nsink_calc_removal()</a></code>: Quantifying relative N removal across a landscape is a key aspects of an <code>nsink</code> analysis. The <code><a href="reference/nsink_calc_removal.html">nsink_calc_removal()</a></code> function takes the object returned from <code><a href="reference/nsink_prep_data.html">nsink_prep_data()</a></code> and calculates relative N removal for each landscape sink. See Kellogg et al [-@kellogg2010geospatial] for details on relative N removal estimation for each sink.</li>
<li>
<code><a href="reference/nsink_generate_flowpath.html">nsink_generate_flowpath()</a></code>: This function uses a combination of flow determined by topography, via a flow-direction raster, for the land-based portions of a flow path and of downstream flow along the NHDPlus stream network.<br>
</li>
<li>
<code><a href="reference/nsink_summarize_flowpath.html">nsink_summarize_flowpath()</a></code>: Summarizing removal along a specified flow path requires relative N removal and a generated flow path. This function uses these and returns a summary of relative N removal along a flow path for each sink.</li>
<li>
<code><a href="reference/nsink_generate_static_maps.html">nsink_generate_static_maps()</a></code>: This function analyzes N removal at the watershed scale by summarizing the results of multiple flow paths. Four static maps are returned: 1)removal efficiency; 2)loading index; 3)transport index; 4)delivery index. Removal efficiency is a rasterized version of the <code><a href="reference/nsink_calc_removal.html">nsink_calc_removal()</a></code> output. Loading index is N sources based on NLCD categories. Transport index is a heat map with the cumulative relative N removal along flow paths originating from a grid of points, density set by the user, across a watershed, highlighting the gradient of downstream N retention. Delivery index is the result of multiplying the loading index and the transport index, and shows potential N delivery from different sources, taking into account the relative N removal as water moves downstream.</li>
<li>
<code><a href="reference/nsink_plot.html">nsink_plot()</a></code>: A function that plots each raster in the list returned from <code><a href="reference/nsink_generate_static_maps.html">nsink_generate_static_maps()</a></code>.<br>
</li>
<li>
<code><a href="reference/nsink_build.html">nsink_build()</a></code>: One of the drivers behind the development of the <code>nsink</code> package was to provide <code>n-sink</code> analysis output that could be used more broadly (e.g. within a GIS). The <code><a href="reference/nsink_build.html">nsink_build()</a></code> runs a complete <code>nsink</code> analysis and outputs R objects, shapefiles and/or TIFFs.</li>
<li>
<code><a href="reference/nsink_load.html">nsink_load()</a></code>: Essentially the inverse of the <code><a href="reference/nsink_build.html">nsink_build()</a></code> function, this function takes a folder of files, likely created by <code><a href="reference/nsink_build.html">nsink_build()</a></code>, and reads them into R.</li>
</ul>
</div>
<div class="section level1">
<h1 id="installation-instructions">Installation instructions<a class="anchor" aria-label="anchor" href="#installation-instructions"></a>
</h1>
<p>At this time we plan on maintaining the <code>nsink</code> package as a GitHub only package and thus it won’t be available directly from CRAN. You may use the <code>install_github()</code> function from the <code>remotes</code> package to install it. The code below will take care of installing <code>remotes</code> and installing <code>nsink</code> from the GitHub repository.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"usepa/nsink"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>And then to load up the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USEPA/nsink" class="external-link">nsink</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="documentation-and-examples">Documentation and examples<a class="anchor" aria-label="anchor" href="#documentation-and-examples"></a>
</h1>
<p>All functions are documented, with examples, and that documentation may be accessed, in R, via the usual help functions. Additionally, an introduction to the <code>nsink</code> package with a more detailed workflow is documented in a vignette.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load up package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USEPA/nsink" class="external-link">nsink</a></span><span class="op">)</span>

<span class="co"># Access package level help</span>
<span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"nsink"</span><span class="op">)</span>

<span class="co"># Access the Introduction to nsink vignette</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"intro"</span>, package <span class="op">=</span> <span class="st">"nsink"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h1>
<p>If you would like to contribute to the <code>nsink</code> package, please first read the <a href="CONTRIBUTING.html">CONTRIBUTING</a>. In short, contributions are happily accepted either via suggestions in the <a href="https://github.com/USEPA/nsink/issues" class="external-link">Issues</a> or via pull request.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/USEPA/nsink/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/USEPA/nsink/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nsink</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jeffrey Hollister <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9254-9740" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Dorothy Kellogg <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9509-4606" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Qian Lei-Parent <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1904-2513" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kenneth Forshay <br><small class="roles"> Funder </small> <a href="https://orcid.org/0000-0002-2867-8492" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jhollist/nsink/actions" class="external-link"><img src="https://github.com/jhollist/nsink/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/jhollist/nsink?branch=main" class="external-link"><img src="https://codecov.io/gh/jhollist/nsink/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.6341565" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6341565.svg" alt="DOI"></a></li>
<li><a href="https://doi.org/10.21105/joss.04039" class="external-link"><img src="https://joss.theoj.org/papers/10.21105/joss.04039/status.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jeffrey Hollister, Dorothy Kellogg, Qian Lei-Parent, Kenneth Forshay.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
